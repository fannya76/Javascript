<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Kaprelar</title>

    <style>
        #para {
            font-size: 5vh;
            margin : 5vh;
        }
    </style>
</head>
<body>

    <p id="para"></p>

    <script>
        let nombre = prompt('Veuillez entrez un nombre positif')
        nombre = parseInt(nombre)
        document.getElementById('para').innerHTML = 'Votre nombre de départ : ' + nombre + '<br>'

        let nbGrand
        let nbPetit
        let newNb 
        let iteration = 0


kaprelar(nombre)

 function kaprelar(n) // sort le plus grand, le plus petit, soustrait, si resultat différent, rebelote
    {

        // afficher resultat newNb dans para
        if(newNb > 0) {
        document.getElementById('para').innerHTML += 'iteration ' + iteration + ' : ' + newNb + '<br>'
        }
        // convertir nombre en chaine puis en tableau
            n = "" + n

            tabNb = n.split('')

        // sortir nbPetit

            // trier tabNb par ordre Croissant, convertir en string puis en nb
                // tabNbCroiss = tabNb.sort((a, b) => a - b) pour tab de nb mais ici tab de string ???
                tabNbCroiss = tabNb.sort()

                nbPetit = tabNbCroiss.join('')
        
                nbPetit = parseInt(nbPetit)
                
        // sortir nbGrand
            // trier tabNb par ordre Décroissant, convertir en string puis en nb
                // tabNbDecroiss = tabNb.sort(function(a, b){return b-a}); 
                tabNbDecroiss = tabNb.sort((a, b) => b - a)

                nbGrand = tabNbDecroiss.join('')
        
                nbGrand = parseInt(nbGrand)

        // calculer grand moins petit
        newNb = nbGrand - nbPetit


        // tant que newNb différent de nb précédent, récursif
        if (newNb != n)
            {
                iteration++
                kaprelar(newNb) 
            }

    }

    

      


    </script>
</body>
</html>